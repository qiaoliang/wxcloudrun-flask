# SafeGuard API 文档

本目录包含 SafeGuard 后端系统的所有 API 接口文档，按照功能模块分类。

## 文档列表

1. [API_auth.md](./API_auth.md) - 认证相关API
   - 微信登录
   - 刷新Token
   - 用户登出
   - 手机号注册
   - 手机号验证码登录
   - 手机号密码登录
   - 手机号验证码+密码登录

2. [API_user.md](./API_user.md) - 用户管理API
   - 获取/更新用户信息
   - 搜索用户
   - 绑定手机号
   - 绑定微信
   - 社区工作人员身份验证

3. [API_checkin.md](./API_checkin.md) - 打卡功能API
   - 获取今日打卡事项
   - 执行打卡
   - 标记为missed
   - 撤销打卡
   - 获取打卡历史
   - 打卡规则管理（增删改查）

4. [API_sms.md](./API_sms.md) - 短信服务API
   - 发送短信验证码

5. [API_supervision.md](./API_supervision.md) - 监督功能API
   - 邀请监督者
   - 生成监督邀请链接
   - 解析监督邀请链接
   - 获取监督邀请列表
   - 接受/拒绝监督邀请
   - 获取我监督的用户列表
   - 获取我的监护人列表
   - 获取被监督用户打卡记录

6. [API_share.md](./API_share.md) - 分享功能API
   - 创建打卡分享链接
   - 解析分享链接
   - 分享页面入口

7. [API_misc.md](./API_misc.md) - 其他功能API
   - 计数器操作
   - 获取计数器值
   - 获取环境配置信息
   - 主页
   - 环境配置查看器

## API 通用说明

### 认证方式
- **Bearer Token**: 在请求头中添加 `Authorization: Bearer <token>`
- **无需认证**: 部分API（如登录、注册、发送验证码）不需要认证

### 响应格式
所有API响应都遵循统一格式：
```json
{
  "code": 1,        // 状态码：1-成功，0-失败
  "msg": "success", // 状态消息
  "data": {...}     // 响应数据，具体结构见各API文档
}
```

### 错误码说明
- **400**: 请求参数错误
- **401**: 未授权/认证失败
- **403**: 权限不足
- **404**: 资源不存在
- **409**: 资源冲突
- **429**: 请求过于频繁
- **500**: 服务器内部错误

### 时间格式
- 日期格式：`YYYY-MM-DD`
- 时间格式：`HH:MM:SS` 或 `HH:MM`
- 日期时间格式：`YYYY-MM-DD HH:MM:SS`

### 分页
当前版本API暂不支持分页，如需获取大量数据请使用时间范围参数限制。

## 示例代码

所有API文档都提供了Python requests库的示例代码，可直接复制使用。

## 更新日志

- 2025-12-09: 更新响应状态码说明，成功响应返回 code: 1，错误响应返回 code: 0
- 2025-12-09: 初始版本，根据生产代码生成完整API文档